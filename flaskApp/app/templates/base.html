



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/header.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Pangolin&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <!-- Block for page-specific CSS files -->
    {% block extra_css %}{% endblock %}
    <style>
        .search-container:focus-within{
            position: absolute;
            height: 40px;
            left: 150px;
            top: 10px;
            
            width: 700px;
            z-index: 100000;
            
        }
        .search-container:focus-within span{
            top:65%
        }
        .search-container:focus-within input{
            height: 50px;
            
        }
        .search-container:focus-within .searchResult{
            background-color: white;
            display: flex;
            flex-direction: column;
            padding: 10px;
            margin-left: 10px;
            overflow: auto;
        }
        .searchResult{
            display: none;
            max-height: 500px;
            
        }
        .searchResult div{
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            

        }
        .searchResult span{
            padding: 2px;
            color: rgb(112, 112, 112);
            margin: 2px;
            text-decoration: underline;
        }
        .searchResult h4{
            padding: 2px;
            margin: 2px;
        }
        .searchResult button{
            width: 70px;
            border-radius: 7px;
            border: 1px solid #1C4980;
            height: 30px;
            padding: 0 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1c4980;
            font-size: 16px;
            transition: .3s;
            cursor: pointer;
        }
        .hide-nav {
            opacity: 0; /* or display: none; */
            pointer-events: none; /* Prevent interaction */
        }
    </style>
    
</head>
<body>   
    {% if current_user.is_authenticated %}
    <header class="header">
        <div class="header-container">
            <div class="logo_search">
                <a href="/" class="logo">
                    <img src="../static/img/header_log.webp?height=40&width=120" alt="Unstop">
                </a>

                <div class="search-container">
                    <span class="search-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </span>
                    <input id="main_search" type="text" onkeydown="search()" onkeypress="search()" placeholder="Search Scholarships">
                    <div id="searchResult" class="searchResult">
                        
                    </div>
                </div>
            </div>


            <nav class="headerNav">
                <ul class="nav-links">
                    <li id="homeLi"><a href="/home">Home</a></li>
                    <li id="carrierLi"><a href="/carrier">Carrier</a></li>
                    <li id="internshipLi"><a href="/internship/home">Internships</a></li>
                    <li id="jobLi"><a href="/job/home">Jobs</a></li>
                    <li id="scholarshipLi"><a href="/scholarship/home">Scholarship</a></li>
                    <li id="courseLi"><a href="/courses">Courses</a></li>
                    <li id="mentorshipLi"><a href="/mentorships">Mentorship</a></li>
                    
                </ul>
            </nav>

            <div class="right-section">
                <button class="icon-button">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                </button>

                <div class="profile-pic" onclick="window.location = window.location.origin + '/profile'">
                    <img width="37" height="37" alt=""
                        src="https://d8it4huxumps7.cloudfront.net/uploads/images/unstop/user-avatar/png/15.png?d=100x100"
                        class="">
                </div>

                <button class="host-button" onclick="window.location = window.location.origin + '/payment'">
                    <i class="fa fa-rocket" aria-hidden="true"></i>
                    <span>Pro</span>
                </button>

                <button class="business-button">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                        </path>
                    </svg>
                    <span>For Business</span>
                </button>
            </div>
        </div>
        
    </header>
    {% else %}
    <header class="header">
        <div class="header-container">
            <div class="logo_search">
                <a href="/" class="logo">
                    <img src="../static/img/header_log.webp?height=40&width=120" alt="Unstop">
                </a>

                <div class="search-container">
                    <span class="search-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </span>
                    <input id="main_search" type="text" placeholder="Search Scholarships">
                </div>
            </div>


            <nav>
                <ul class="nav-links">
                    <li id="homeLi"><a href="/home">Home</a></li>
                    <li id="carrierLi"><a href="/carrier">Carrier</a></li>
                    <li id="internshipLi"><a href="/internship/home">Internships</a></li>
                    <li id="jobLi"><a href="/job/home">Jobs</a></li>
                    <li id="scholarshipLi"><a href="/scholarship/home">Scholarship</a></li>
                    <li id="courseLi"><a href="/courses">Courses</a></li>
                    <li id="mentorshipLi"><a href="/mentorships">Mentorship</a></li>
                    
                </ul>
            </nav>

            <div class="right-section">
                
                <button id="loginbtn" class="host-button" onclick="window.location = window.location.origin + '/login'">
                    <i class="fa fa-key" aria-hidden="true"></i>
                    <span>login</span>
                </button>

                <button class="host-button" onclick="window.location = window.location.origin + '/payment'">
                    <i class="fa fa-rocket" aria-hidden="true"></i>
                    <span>Pro</span>
                </button>

                <button class="business-button">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                        </path>
                    </svg>
                    <span>For Business</span>
                </button>
            </div>
        </div>
    </header>
    {% endif %}

    <!-- Page Content -->
    <div class="containermain">
        {% block content %}{% endblock %}
    </div>
    <script>
        async function search() {
            const query = document.getElementById('main_search').value;
            

            try {
                // Use fetch to get data from the API
                const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
                const data = await response.json();

                // Display the results
                const resultsList = document.getElementById('searchResult');
                resultsList.innerHTML = '';  // Clear previous results

                if (data.results.length > 0) {
                    data.results.forEach(result => {
                        const listItem = document.createElement('div');
                        listItem.innerHTML = ` <div><span>${result.type}</span> <h4>${result.title}</h4></div>  <button onclick= "test(${result.id}, '${result.type}')">open</button>`;
                        resultsList.appendChild(listItem);
                    });
                } else {
                    resultsList.innerHTML = '<li>No results found.</li>';
                }
            } catch (error) {
                console.error('Error fetching search results:', error);
                document.getElementById('resultsList').innerHTML = '<li>Error retrieving results. Please try again.</li>';
            }
        }

        
        function test(id, type){
            console.log(id, type)
            if(type == "Scholarship"){
                window.location.href = window.location.origin + '/api/scholarships/' + id;
            }if (type == "Mentor") {
                window.location.href = window.location.origin + '/api/mentorships/' + id;
            } if (type == "Internship") {
                window.location.href = window.location.origin + '/api/internships/' + id;
            }if (type == "Job") {
                window.location.href = window.location.origin + '/api/jobs/' + id;
            }
            
        }
        document.getElementById('main_search').addEventListener('focus', function() {
            document.querySelector('.headerNav').classList.add('hide-nav');
        });

        document.getElementById('main_search').addEventListener('blur', function() {
            setTimeout(() => {
                document.querySelector('.headerNav').classList.remove('hide-nav');
                document.getElementById('main_search').value = ''
                document.getElementById('searchResult').innerHTML = ''
            }, 200);
            /**/
        });

    </script>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h4>About Us</h4>
                <ul>
                    <li><a href="/about">Our Story</a></li>
                    <li><a href="/team">Our Team</a></li>
                    <li><a href="/careers">Careers</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Resources</h4>
                <ul>
                    <li><a href="/blog">Blog</a></li>
                    <li><a href="/faq">FAQ</a></li>
                    <li><a href="/support">Support</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Legal</h4>
                <ul>
                    <li><a href="/terms">Terms of Service</a></li>
                    <li><a href="/privacy">Privacy Policy</a></li>
                    <li><a href="/cookies">Cookie Policy</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Connect</h4>
                <ul>
                    <li><a href="https://facebook.com">Facebook</a></li>
                    <li><a href="https://twitter.com">Twitter</a></li>
                    <li><a href="https://linkedin.com">LinkedIn</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 Career Platform. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>
